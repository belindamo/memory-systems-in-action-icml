{
  "turn_global_index": 168,
  "session_index": 15,
  "session_id": "sharegpt_PvScEsS_0",
  "turn_in_session": 7,
  "date": "2023/05/18 (Thu) 17:17",
  "role": "assistant",
  "content": "i. Return a list of all patient names:\n```sql\nSELECT `Patient Name` FROM Patient;\n```\nii. Return a list of all patient addresses, showing each address only once:\n```sql\nSELECT DISTINCT `Patient Address` FROM Patient;\n```\niii. Write a query to count how many patients have Dr Jenkins as one of their registered doctors:\n```sql\nSELECT COUNT(*) FROM PatientDoctor WHERE `Doctor ID` = 1;\n```\n(Note: Assuming `Doctor ID` 1 corresponds to Dr. Jenkins)\n\niv. Calculate the average age of all patients:\n```sql\nSELECT AVG(YEAR(CURDATE()) - YEAR(`Patient Date of Birth`)) AS `Average Age` FROM Patient;\n```\nv. Return all the patients whose last name is \u2018Jones\u2019:\n\n(Note: Assuming that the full name is stored in the `Patient Name` field and that last names come after first names separated by a space)\n```sql\nSELECT `Patient Name` FROM Patient WHERE `Patient Name` LIKE '% Jones%';\n```\nvi. Find the names of the patients that were born before 1st January 1980:\n```sql\nSELECT `Patient Name` FROM Patient WHERE `Patient Date of Birth` < '1980-01-01';\n```\nvii. List all the patients\u2019 names along with their registered doctors\u2019 names:\n```sql\nSELECT Patient.`Patient Name`, Doctor.`Doctor Name` \nFROM Patient \nJOIN PatientDoctor ON Patient.`Patient ID` = PatientDoctor.`Patient ID`\nJOIN Doctor ON PatientDoctor.`Doctor ID` = Doctor.`Doctor ID`;\n```\nviii. List all the patients who are currently taking medication. Give the name of the patient, their current medication, and the recent condition they are taking the medication for:\n```sql\nSELECT Patient.`Patient Name`, Medication.`Medication Name`, Condition.`Condition Name`\nFROM Patient \nJOIN PatientMedication ON Patient.`Patient ID` = PatientMedication.`Patient ID`\nJOIN Medication ON PatientMedication.`Medication ID` = Medication.`Medication ID`\nJOIN PatientCondition ON Patient.`Patient ID` = PatientCondition.`Patient ID`\nJOIN Condition ON PatientCondition.`Condition ID` = Condition.`Condition ID`\nWHERE Medication.`Medication Name` IS NOT NULL;\n```\nix. List all patients, giving their name and date of birth, and if the patient has had a recent condition, provide the medication they are taking. Otherwise, if the patient has had no recent condition, return null in the current medication field:\n```sql\nSELECT Patient.`Patient Name`, Patient.`Patient Date of Birth`, Medication.`Medication Name`\nFROM Patient \nLEFT JOIN PatientCondition ON Patient.`Patient ID` = PatientCondition.`Patient ID`\nLEFT JOIN PatientMedication ON Patient.`Patient ID` = PatientMedication.`Patient ID`\nLEFT JOIN Condition ON PatientCondition.`Condition ID` = Condition.`Condition ID`\nLEFT JOIN Medication ON PatientMedication.`Medication ID` = Medication.`Medication ID`\nWHERE (Condition.`Condition Name` IS NULL AND Medication.`Medication Name` IS NULL)\n    OR (Condition.`Condition Name` IS NOT NULL AND Medication.`Medication Name` IS NOT NULL);\n```\n(Note: This query assumes that a patient can have only one recent condition and medication. If a patient can have multiple recent conditions and medications, additional logic would be needed to determine which one to display.)",
  "has_answer": false
}