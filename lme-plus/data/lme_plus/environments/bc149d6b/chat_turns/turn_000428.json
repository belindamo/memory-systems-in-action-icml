{
  "turn_global_index": 428,
  "session_index": 42,
  "session_id": "sharegpt_uzwG36E_1",
  "turn_in_session": 2,
  "date": "2023/05/29 (Mon) 14:50",
  "role": "assistant",
  "content": "Sure, let's use the JSONPlaceholder API to create a more detailed example. We'll create a simple blog app that fetches posts and users from the API.\n\n1. First, create a dynamic route for the blog posts:\n```bash\napp/blog/[postId]/page.tsx\n```\n1. Next, define the page component and the types for the post:\n```typescript\n// app/blog/[postId]/page.tsx\n\nimport React from 'react';\n\ninterface Post {\n  id: number;\n  title: string;\n  body: string;\n}\n\ninterface PageProps {\n  post: Post;\n}\n\nconst Page: React.FC<PageProps> = ({ post }) => {\n  return (\n    <div>\n      <h1>{post.title}</h1>\n      <p>{post.body}</p>\n    </div>\n  );\n};\n\nexport default Page;\n```\n1. Now, define the `generateStaticParams` function to fetch the post IDs:\n```typescript\n// app/blog/[postId]/page.tsx\n\nimport type { GenerateStaticParams } from 'next';\n\ninterface Params {\n  postId: string;\n}\n\nexport const generateStaticParams: GenerateStaticParams<Params> = async () => {\n  const response = await fetch('https://jsonplaceholder.typicode.com/posts');\n  const posts = await response.json();\n\n  return posts.map((post: { id: number }) => ({\n    postId: post.id.toString(),\n  }));\n};\n```\n1. Finally, define the `generateMetadata` function to fetch the individual post data:\n```typescript\n// app/blog/[postId]/page.tsx\n\nimport type { GenerateMetadata, Metadata } from 'next';\n\ninterface PostMetadata extends Metadata {\n  post: Post;\n}\n\nexport const generateMetadata: GenerateMetadata<Params, PostMetadata> = async (\n  { params }\n) => {\n  const response = await fetch(\n    `https://jsonplaceholder.typicode.com/posts/${params.postId}`\n  );\n  const post = await response.json();\n\n  return {\n    post,\n  };\n};\n\n// Update the Page component to receive metadata instead of params\nconst Page: React.FC<PostMetadata> = ({ post }) => {\n  // ...\n};\n```\nWith this setup, the `generateStaticParams` function will fetch the list of post IDs during the build process, and Next.js will generate a static page for each post. The `generateMetadata` function will fetch the post data, which will be passed to the page component as metadata.\n\nNow, let's create a simple page to list all the posts:\n\n1. Create a new file:\n```bash\napp/posts/page.tsx\n```\n1. Define the page component and types:\n```typescript\n// app/posts/page.tsx\n\nimport React from 'react';\nimport Link from 'next/link';\n\ninterface PostSummary {\n  id: number;\n  title: string;\n}\n\ninterface PageProps {\n  posts: PostSummary[];\n}\n\nconst Page: React.FC<PageProps> = ({ posts }) => {\n  return (\n    <div>\n      <h1>All Posts</h1>\n      <ul>\n        {posts.map((post) => (\n          <li key={post.id}>\n            <Link href={`/blog/${post.id}`}>\n              <a>{post.title}</a>\n            </Link>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default Page;\n```\n1. Define the `generateMetadata` function to fetch the list of posts:\n```typescript\n// app/posts/page.tsx\n\nimport type { GenerateMetadata, Metadata } from 'next';\n\ninterface PostListMetadata extends Metadata {\n  posts: PostSummary[];\n}\n\nexport const generateMetadata: GenerateMetadata<{}, PostListMetadata> = async () => {\n  const response = await\n```",
  "has_answer": false
}