{
  "session_id": "sharegpt_WHg9Nys_0",
  "session_index": 16,
  "date": "2023/05/24 (Wed) 23:33",
  "turns": [
    {
      "role": "user",
      "content": "how can i configure logrotate in tomcat with 30 days max and size of 50 mb and add cron"
    },
    {
      "role": "assistant",
      "content": "To configure logrotate in Tomcat with a maximum of 30 days and a size limit of 50 MB, you can follow these steps:\n\n1. Create a configuration file for logrotate. For example, you can create a file named `/etc/logrotate.d/tomcat`.\n2. Open the file with a text editor and add the following content:\n```bash\n/var/log/tomcat/*.log {\n    daily\n    rotate 30\n    size 50M\n    compress\n    delaycompress\n    missingok\n    notifempty\n}\n```\nThis configuration will rotate the logs daily, keep a maximum of 30 rotated logs, compress the rotated logs, delay the compression until the next rotation, and not generate an error if the log file is missing.\n3. Save the file and exit the text editor.\n4. Test the logrotate configuration by running the following command:\n```bash\nlogrotate -d /etc/logrotate.d/tomcat\n```\nThis command will simulate the log rotation and display the actions that logrotate would perform.\n5. Add a cron job to run the logrotate command daily. To do this, run the following command:\n```\ncrontab -e\n```\nThis command will open the cron table in your default text editor.\n6. Add the following line to the end of the file:\n```javascript\n0 0 * * * /usr/sbin/logrotate /etc/logrotate.d/tomcat >/dev/null 2>&1\n```\nThis line will run the logrotate command daily at midnight and redirect any output to /dev/null to prevent cron from sending emails.\n7. Save the file and exit the text editor.\n\nYour log files should now be rotated daily and kept for a maximum of 30 days, with each rotated log file compressed and a maximum size of 50 MB."
    }
  ]
}