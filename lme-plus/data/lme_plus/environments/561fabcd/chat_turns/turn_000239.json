{
  "turn_global_index": 239,
  "session_index": 24,
  "session_id": "864a563d_4",
  "turn_in_session": 3,
  "date": "2023/05/27 (Sat) 04:41",
  "role": "assistant",
  "content": "A contact form is a fantastic way to allow visitors to get in touch with you. Let's add a simple contact form to your Flask website.\n\n**Step 1: Create a new route for the contact page**\nIn your `routes.py` file, add a new route for the contact page:\n```python\n# app/routes.py\nfrom flask import Flask, render_template, request\n\napp = Flask(__name__)\n\n@app.route(\"/\")\ndef index():\n    return render_template(\"index.html\")\n\n@app.route(\"/contact\", methods=[\"GET\", \"POST\"])\ndef contact():\n    if request.method == \"POST\":\n        # Handle form submission\n        name = request.form[\"name\"]\n        email = request.form[\"email\"]\n        message = request.form[\"message\"]\n        # For now, let's just print the form data\n        print(f\"Received message from {name} ({email}): {message}\")\n        return \"Thank you for your message!\"\n    return render_template(\"contact.html\")\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n```\nHere, we've added a new route for the `/contact` URL, which will handle both GET and POST requests. When the form is submitted (POST request), we'll extract the form data and print it to the console. For now, we won't worry about sending an email or storing the data; we'll just focus on getting the form working.\n\n**Step 2: Create the contact form template**\nCreate a new file called `contact.html` in your `templates/` directory:\n```html\n<!-- templates/contact.html -->\n<!DOCTYPE html>\n<html>\n  <head>\n    <title>Contact Me</title>\n  </head>\n  <body>\n    <h1>Contact Me</h1>\n    <form action=\"\" method=\"post\">\n      <label for=\"name\">Name:</label>\n      <input type=\"text\" id=\"name\" name=\"name\"><br><br>\n      <label for=\"email\">Email:</label>\n      <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n      <label for=\"message\">Message:</label>\n      <textarea id=\"message\" name=\"message\"></textarea><br><br>\n      <input type=\"submit\" value=\"Send Message\">\n    </form>\n  </body>\n</html>\n```\nThis is a simple HTML form with input fields for the visitor's name, email, and message. The form submits to the same URL (`/contact`) using the POST method.\n\n**Step 3: Add form validation**\nWe should add some basic form validation to ensure that the visitor enters valid data. We'll use Flask-WTF, a popular library for handling forms in Flask. Install it using pip:\n```\npip install flask-wtf\n```\nUpdate your `routes.py` file to import Flask-WTF and add form validation:\n```python\n# app/routes.py\nfrom flask import Flask, render_template, request\nfrom flask_wtf import FlaskForm\nfrom wtforms import StringField, TextAreaField, validators\n\napp = Flask(__name__)\napp.config[\"SECRET_KEY\"] = \"secret_key_here\"  # Generate a secret key\n\nclass ContactForm(FlaskForm):\n    name = StringField(\"Name\", validators=[validators.DataRequired()])\n    email = StringField(\"Email\", validators=[validators.DataRequired(), validators.Email()])\n    message = TextAreaField(\"Message\", validators=[validators.DataRequired()])\n\n@app.route(\"/contact\", methods=[\"GET\", \"POST\"])\ndef contact():\n    form = ContactForm()\n    if form.validate_on_submit():\n        name = form.name.data\n        email = form.email.data\n        message = form.message.data\n        print(f\"Received message from {name} ({email}): {message}\")\n        return \"Thank you for your message!\"\n    return render_template(\"contact.html\", form=form)\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n",
  "has_answer": false
}