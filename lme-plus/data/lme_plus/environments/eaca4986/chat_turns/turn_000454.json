{
  "turn_global_index": 454,
  "session_index": 40,
  "session_id": "sharegpt_kNi3QzP_24",
  "turn_in_session": 3,
  "date": "2023/05/29 (Mon) 10:27",
  "role": "assistant",
  "content": "This error occurs because the `canvas` variable is not defined inside the `ausgabe()` function. You can fix this by declaring `canvas` as a global variable at the beginning of your code, like this:\n```python\nimport tkinter as tk\nimport matplotlib.pyplot as plt\nfrom matplotlib.backends.backend_tkagg import FigureCanvasTkAgg\n\n# Declare canvas as a global variable\nglobal canvas\n\ndef eingabe():\n    global num\n    stopLoop = False\n    while not stopLoop: # while damit man mehere versuche hat\n        userInput = input(\"Geben Sie eine positive ganze Zahl ein: \")\n        # sichern das es eine int ist\n        try:\n            num = int(userInput)\n            if num > 0:\n                stopLoop = True\n            else:\n                print(\"Zahl muss positiv sein!\")\n        except ValueError: \n            print(\"Ung\u00fcltige Eingabe! Bitte geben Sie eine ganze Zahl ein.\")\n    return num\n\ndef plot_erstellen():\n    global canvas\n    x = range(num)\n    y = [i**2 for i in x]\n    fig = plt.figure(figsize=(5, 4), dpi=100)\n    fig.add_subplot(111).plot(x, y)\n\n    # Destroy the old plot widget if it exists\n    if canvas.get_tk_widget() is not None:\n        canvas.get_tk_widget().destroy()\n\n    # Create the new plot widget\n    canvas = FigureCanvasTkAgg(fig, master=window)\n    canvas.draw()\n    canvas.get_tk_widget().pack()\n\ndef ausgabe():\n    global canvas\n    plot_erstellen()\n    canvas.get_tk_widget().pack()\n\n# Create the window\nwindow = tk.Tk()\n\n# Create the input field\ninput_field = tk.Entry(window)\ninput_field.pack()\n\n# Create the button\ngenerate_button = tk.Button(window, text=\"Generate Plot\", command=ausgabe)\ngenerate_button.pack()\n\n# Create the initial plot widget\nfig = plt.figure(figsize=(5, 4), dpi=100)\ncanvas = FigureCanvasTkAgg(fig, master=window)\ncanvas.get_tk_widget().pack()\n\n# Run the window\nwindow.mainloop()\n```\nIn this updated code, we declare `canvas` as a global variable at the beginning of the code. This allows us to use `canvas` inside the `plot_erstellen()` and `ausgabe()` functions, even though it is defined outside of those functions.\n\nWith this modification, the code should now work as expected.",
  "has_answer": false
}