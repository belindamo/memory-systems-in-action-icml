{
  "turn_global_index": 385,
  "session_index": 34,
  "session_id": "sharegpt_8jxRz9U_0",
  "turn_in_session": 5,
  "date": "2023/05/28 (Sun) 13:53",
  "role": "assistant",
  "content": "Here is the updated function that will use a taxonomy's category instead of WordPress post category:\n```php\nfunction custom_post_list_shortcode( $atts ) {\n    $atts = shortcode_atts( array(\n        'number_of_posts' => 5,\n        'topic' => '',\n    ), $atts, 'custom_post_list' );\n \n    $args = array(\n        'post_type' => 'policy',\n        'posts_per_page' => $atts['number_of_posts'],\n    );\n \n    if ( ! empty( $atts['topic'] ) ) {\n        $args['tax_query'] = array(\n            array(\n                'taxonomy' => 'topic',\n                'field'    => 'slug',\n                'terms'    => $atts['topic'],\n            ),\n        );\n    }\n \n    $query = new WP_Query( $args );\n \n    if ( $query->have_posts() ) {\n        $output = '<ul>';\n        while ( $query->have_posts() ) {\n            $query->the_post();\n            $output .= '<li><a href=\"' . get_the_permalink() . '\">' . get_the_title() . '</a></li>';\n        }\n        wp_reset_postdata();\n        $output .= '</ul>';\n    } else {\n        $output = 'No policies found for the given topic.';\n    }\n \n    return $output;\n}\nadd_shortcode( 'custom_post_list', 'custom_post_list_shortcode' );\n```\nNow you can use the shortcode [custom\\_post\\_list number\\_of\\_posts=\"5\" topic=\"academic-affairs\"] to display the list of policies within the topic \"academic-affairs\" or [custom\\_post\\_list number\\_of\\_posts=\"5\" topic=\"student-life\"] to display the list of policies within the topic \"student-life\"\n\nYou should make sure that the taxonomy \"topic\" has been registered for the custom post type \"policy\" before using this shortcode.",
  "has_answer": false
}