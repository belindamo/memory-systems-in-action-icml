{
  "turn_global_index": 578,
  "session_index": 52,
  "session_id": "sharegpt_FQi5DlJ_48",
  "turn_in_session": 9,
  "date": "2023/05/29 (Mon) 03:22",
  "role": "assistant",
  "content": "The reason you are getting the same index on every card is because of the way you are using the `for` loop to iterate through the `searchResults` array.\nIn your for loop, you define `user` as the current element in the `searchResults` array, and then you bind the click event to the `.View` class which will be present in each card.\n\nWhen the loop finishes running, `user` references the last element in the `searchResults` array.\n\nSo when you click on the 'view film details' button, the event will reference the `user` variable, which is the last element in the `searchResults` array, which is the same for every card.\n\nYou can resolve this by binding the click event inside the for loop and passing the current `user` to the event.\n```css\nfor (var i = 0; i < searchResults.length; i++) {\n    var user = searchResults[i];\n    var card = `<div class=\"card\" style=\"margin-top: 2rem;\">\n                            <div class=\"card-body\">\n                                <p class=\"card-text\">` + user.title + `</p>\n                            </div>\n                            <div class=\"card-footer text-muted\">\n                                ` + user.release_year + `\n                            </div>\n                            <div class=\"card-footer text-muted\">\n                                ` + user.rating + `\n                            </div>\n                            <div class=\"card-footer text-muted\">\n                                <a href=\"filmDetails.html\" class=\"btn btn-primary View\">View Film Details</a>\n                            </div>\n                        </div>`;\n    $(\"#posts\").append(card);\n    $(\".View\").on(\"click\", {user:user}, function(event) {\n        sessionStorage.setItem(\"selectedFilm\", JSON.stringify(event.data.user));\n    });\n}\n```\nIn this way you are passing the correct `user` to the event, so that the correct data is stored in the session storage.",
  "has_answer": false
}