{
  "turn_global_index": 88,
  "session_index": 8,
  "session_id": "sharegpt_SaUokxc_63",
  "turn_in_session": 4,
  "date": "2023/01/05 (Thu) 21:41",
  "role": "assistant",
  "content": "Sure! Here's an example of how you could modify the `SquareIntegration` schema and the `createSquareIntegration` and `updateSquareIntegration` controller methods to include the `syncEnabled` property:\n```javascript\n// models/SquareIntegration.js\n\nconst mongoose = require('mongoose');\n\nconst squareIntegrationSchema = new mongoose.Schema({\n  brandId: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: 'Brand',\n    required: true,\n    unique: true,\n  },\n  applicationId: {\n    type: String,\n    required: true,\n  },\n  accessToken: {\n    type: String,\n    required: true,\n  },\n  syncEnabled: {\n    type: Boolean,\n    default: true,\n  },\n});\n\nconst SquareIntegration = mongoose.model('SquareIntegration', squareIntegrationSchema);\n\nmodule.exports = SquareIntegration;\n```\n\n```javascript\n// controllers/squareIntegrationController.js\n\nconst SquareIntegration = require('../models/SquareIntegration');\n\nexports.createSquareIntegration = async (req, res) => {\n  try {\n    const squareIntegration = new SquareIntegration({\n      brandId: req.user.brandId,\n      applicationId: req.body.applicationId,\n      accessToken: req.body.accessToken,\n      syncEnabled: req.body.syncEnabled, // Add syncEnabled property to request body\n    });\n    await squareIntegration.save();\n    res.json({\n      success: true,\n      message: 'Square integration created successfully',\n      data: squareIntegration,\n    });\n  } catch (err) {\n    res.json({\n      success: false,\n      message: 'Failed to create Square integration',\n      error: err.message,\n    });\n  }\n};\n\nexports.updateSquareIntegration = async (req, res) => {\n  try {\n    const squareIntegration = await SquareIntegration.findOneAndUpdate(\n      { brandId: req.user.brandId },\n      {\n        applicationId: req.body.applicationId,\n        accessToken: req.body.accessToken,\n        syncEnabled: req.body.syncEnabled, // Add syncEnabled property to request body\n      },\n      { new: true }\n    );\n    if (!squareIntegration) {\n      return res.json({\n        success: false,\n        message: 'Square integration not found',\n      });\n    }\n    res.json({\n      success: true,\n      message: 'Square integration updated successfully',\n      data: squareIntegration,\n    });\n  } catch (err) {\n    res.json({\n      success: false,\n      message: 'Failed to update Square integration',\n      error: err.message,\n    });\n  }\n};\n```\nIn this example, the `SquareIntegration` schema is updated to include the `syncEnabled` property, which has a default value of `true`. The `createSquareIntegration` and `updateSquareIntegration` controller methods are modified to include the `syncEnabled` property in the request body.\n\nYou would also need to update any client-side code that interacts with these API endpoints to include the `syncEnabled` property in the request payload.\n\nFinally, you would need to update the `ManageAPIAccessPage` component to include the `syncEnabled` property in the `integration` state object and to render the toggle in the component's JSX.",
  "has_answer": false
}